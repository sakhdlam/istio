name: 'Set vault secrets'
description: 'Set vault secrets'
author: 'engenharia-neon'
inputs:
  cluster-metadata:
    type: string
    description: "cluster-metadata"
runs:
  using: 'composite'
  steps:
    - name: Checkout repository
      uses: actions/checkout@v2

    - name: Set up Python
      uses: actions/setup-python@v2
      with:
        python-version: '3.10.6'

    - name: Process JSON with Pcert-manager-cainjector-6b9f7767b7-pffqvython
      shell: python
      env:
        CLUSTER_METADATA: ${{ inputs.cluster-metadata }}
      run: python enable-vault-pki.py
