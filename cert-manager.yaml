apiVersion: v1
kind: Secret
type: Opaque
metadata:
  name: cert-manager-vault-approle
  namespace: istio-system
data:
  secretId: "$SECRET_ID"
---
apiVersion: cert-manager.io/v1
kind: Issuer
metadata:
  name: vault-issuer
  namespace: istio-system
spec:
  vault:
    path: $ROLE_ID 
    server: $VAULT_ADDR 
    auth:
     appRole:
       path: istio 
       roleId: $ROLE_ID
       secretRef:
         name: cert-manager-vault-approle
         key: secretId
---
